(()=>{document.addEventListener("DOMContentLoaded",()=>{let l=document.body,n=document.getElementById("article-modal"),r=document.getElementById("modal-content");if(!n||!r){console.error("Modal elements not found");return}let c,u=1500;document.querySelectorAll(".article-card").forEach(t=>{t.addEventListener("mouseenter",o=>{let e=t.dataset.url,s=t.dataset.originalLink;c=setTimeout(()=>{e&&L(e,s)},u)}),t.addEventListener("mouseleave",()=>{clearTimeout(c)}),t.addEventListener("click",o=>{if(o.target.closest(".article-tags-list-item")||o.target.closest(".article-original-link"))return;o.stopPropagation();let e=t.dataset.originalLink;e&&window.open(e,"_blank","noopener,noreferrer")})});function L(t,o){l.classList.add("modal-open"),n.classList.add("is-active"),r.innerHTML="<p>Loading...</p>",fetch(t).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.text()}).then(e=>{let d=new DOMParser().parseFromString(e,"text/html").querySelector(".article-content");if(d){let m="";o&&(m=`<p><a href="${o}" target="_blank" rel="noopener noreferrer">\u9605\u8BFB\u539F\u6587</a></p><hr>`),r.innerHTML=m+d.innerHTML}else r.innerHTML='<p>Could not load article content. The selector ".article-content" might be incorrect.</p>',console.error("Could not find '.article-content' in fetched document from URL:",t)}).catch(e=>{console.error("Failed to fetch article:",e),r.innerHTML=`<p>Error loading article. ${e.message}</p>`})}n.addEventListener("mouseleave",()=>{a()}),n.addEventListener("click",t=>{t.target===n&&a()});let i=document.createElement("button");i.className="modal-close-button",i.innerHTML="&times;",i.addEventListener("click",a),n.querySelector(".modal-content-wrapper").appendChild(i);function a(){n.classList.remove("is-active"),l.classList.remove("modal-open"),r.innerHTML=""}});})();
